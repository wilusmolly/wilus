
와 ㅋㅋㅋ 진짜 골치아프네요

 

다른 분들은 그냥 여러가지로 삽질하지 마시고 CONORY님 유료 모듈 하나로 쉽게 해결하시길

 

기왕 무료 SEO모듈 사용하는 김에 쓸만하게 만들어보려고 하는데 산넘어 산이네요

 

제 사이트만 이상한줄 알았는데 여기 @웹지기님 사이트도 마찬가지...

 

소스코드를 보면, 일단 첨부파일이 있는 경우 섬네일을 갖고 og:image 태그를 생성하도록 되어 있고

 

그와는 별개로, 설정에서 등록한 사이트 이미지를 또 og:image 태그로 생성하도록 되어 있는데

 

이로 인해 글에 첨부이미지가 없는 경우는 괜찮지만 있는 경우는 두개씩 달립니다

 

그래서 페이스북으로 가져가 보면 첨부파일이 있는데도 그 섬네일이 안나오고 사이트 이미지만 나온다던가

 

카톡으로 가져가 보면 한참 로딩하다가 엑박(하얀바탕에 그림표시만 나옴)으로 나온다던가

 

암튼 이모양입니다

 

이거 해결하려고 하는데 PHP 모르는 저로서는 보통 일이 아니네요

 

구글에 찾아봐도 대체 무슨 말인지 모르겠고...

 

아 그리고 이건 여담인데, 혹시 twitter card 애드온 같이 쓰시는 분들은 애드온 파일 열어서 og태그 관련부분 전부 지우고 쓰세요

 

그거때문에 또 중복으로 걸립니다 (그리고 og:url이 짧은주소가 아니라 긴 주소로 나오더군요)

웹지기	2016.04.01 12:58:08
일단 전 첨부파일의 이미지를 제대로 불러가더군요. SEO 모듈에서 우선순위를 적용한 것으로 알고 있습니다. 제가 잘못 알고 있을 수도 있구요ㅗ.
?
기븐	2016.04.01 13:08:39
두개 다 출력되는 바람에, 어떨 때는 첨부파일을 읽어가고 어떨 때는 사이트 이미지를 읽어가는거 같더군요.

그리고 이렇게 두개 다 출력되면, 예컨대 카카오톡 등에서 확인해보면 이미지 로딩이 굉장히 느립니다. 엑박으로 뜰 때가 많구요
profile
웹지기	2016.04.01 13:14:43
아... 카카오가 그래서 항상 새로고침을 해야 되는거군요. 최근에 그랬는데 말씀 하신 증상 따문인듯 합니다.
?
기븐	2016.04.01 13:16:21
참고로 수정방법 이전에 쓴 게시글에 내용 추가해서 올려놨습니다.

https://www.xetown.com/lakepark/214874
profile
웹지기	2016.04.01 13:24:53
캐시파일재생성시 문제 생기는거 때문에 1.8.1로 업데이트 되었서요. 그래서 팁에 추가해 주신게 최신버전에 적용에 어려움이 있는듯해요.
?
기븐	2016.04.01 13:32:48
아, 제가 쓰는 버전도 1.8.18입니다. 버전을 착각했네요. 수정하겠습니다
profile
웹지기	2016.04.01 13:41:18
네 ?? SEO모듈이 최신버전이 아닌 것으로 팁이 작성되서 코드가 약간 다른거 같아서요.
?
기븐	2016.04.01 14:38:03
자료실에서 다운받아서 확인해봐야겠네요.
profile
웹지기	2016.04.01 14:41:23
아.. 죄송합니다. 제가 사용하는 모듈이 fork 된 자료인데 코드 차이가 많이 잇네요. 
제가 사용하는건 메뉴설명이 메타태그로 들어가는 버전입니다. 확인 하실필요 없겠습니다.
?
기븐	2016.04.01 14:47:51
메뉴설명부분만 추가되었다면 저 부분(이미지부분) 줄번호만 다르고 내용은 똑같나요?
profile
웹지기	2016.04.01 14:49:04
아니요. 많이 달라요... 문의는 남겨 놓았습니다.
profile
BNU	2016.04.02 03:19:15
# 페이스북과 카카오톡
- 썸네일이미지를 나타낼 때 여러 이미지 중 썸네일로 사용하기위한 최적의(고화질, 가로형으로 표시하기 적당한 비율) 이미지를 서비스에서 자체적으로 선별하여 표시합니다
- 카카오톡은 선택한 대표이미지(첨부파일 중 선택한 것)를 표시합니다(meta tag로 나열된 이미지 중 첫번째)
- 페이스북은 선택한 대표이미지 대신 최적의 이미지를 선별합니다
- 그래서 페이스북 크롤러가 접근할 때는 대표이미지(선택하지 않았다면 첨부한 첫번째 이미지) 또는 사이트이미지 하나만 출력합니다
- 페이스북과 카카오톡은 공유 시 썸네일을 비동기로 가져와 표시합니다
- 이 때문에 공유 즉시 썸네일을 표시하지 못하는 것은 이미지 크기(dimension)를 함께 출력하여 해결하였습니다

# 이미지를 여러개 표시하는 방법을 고수하는 것은
- 검색 사이트 등의 크롤러를 위해 이 방식을 고수하고 있습니다
- 실제 검색 결과에 반영되는 효과가 있는지는 명확히 확인되지 않지만 구글 크롤러가 나열한 이미지를 모두 인식한 것은 확인했습니다
- 이 방법이 페이스북과 카카오톡 공유 시 의도하지 않은 이미지를 표시하지 않도록 개선이 적용된 상태입니다

# 기타
- 트위터와 구글플러스, 핀터레스트에 게시할 때에도 개선하고 있습니다
- 테스트는 XE 공식사이트의 게시물을 대상으로 확인했습니다
- 보통 한 번 사용된 URL은 캐시로 보관되어 재사용되므로 오래되거나 공유가 없을 법한 게시물을 대상으로 매번 다른 게시물로 테스트 했습니다.
- 특별한 문제를 일으키지 않는 한 meta tag에 이미지를 여럿 나열하는 방식은 변경할 계획이 없습니다

 1
?
기븐	2016.04.02 06:12:40
그렇군요. 근데 제가 제 사이트에 직접 적용해본 결과, 여러개 나오도록 할 경우 카톡으로 퍼 가면 한동안은 계속 엑박(흰 바탕에 그림표시) 만 나오더군요. 근데 하나만 나오도록 하니까 거의 즉시 이미지가 나오는 걸 확인했습니다.

그리고 트위터의 경우는, 물론 seo모듈에서 지원하는 기능은 아니지만 저런 식으로 수정해서 사용할 경우, 첨부파일이미지 있는 게시물에서 사이트이미지 같이 나오는 걸 안 없애주면 이상하게도 거의 무조건 사이트 이미지만 나오더군요.

저같은 경우는 그냥 직접 수정해서 쓰도록 해야겠습니다. 감사합니다.
profile
Paul	2016.04.04 14:41:02
아마도 사용자의 환경에 따라 조금씩 다른가 봅니다. 저의 경우에는 둘 다 테스트를 해봤는데요. 기븐님의 방법보다 BNU 님께서 올려주신 자료대로 해야 오히려 Facebook 과 Twitter(기븐님께서 알려주신 방법대로 적용), 그리고 카카오톡에서 잘 작동을 하는 것 같습니다. 흠... 그래서 제 생각에는 SEO 모듈 사용자분들께서 두 분의 방법을 모두 사용해 보시고 자신의 환경에 맞는 것을 선택하시면 좋을 것 같습니다. BNU님 그리고 기븐님, 두 분께 모두 감사드립니다!!!